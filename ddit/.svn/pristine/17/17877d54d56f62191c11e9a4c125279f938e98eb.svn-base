<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ page trimDirectiveWhitespaces="true"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>



<div class="content-body">
	
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />


    
  
	
	<!-- Page Headings Start -->
	<div class="row justify-content-between align-items-center mb-10">

		<!-- Page Heading Start -->
		<div class="col-12 col-lg-auto mb-20">
			<div class="page-heading">
				<h3 class="title">수강생목록</h3>
			</div>
		</div>
		<!-- Page Heading End -->
		<div style="z-index:1; position: absolute; top: 80px; right: 90px; width: 210px">
			
				<span><input type="text" class="form-control input-date"></span>
			
		</div>
	</div>
	<!-- Page Headings End -->


	
	<div class="row">
		<div class="col-lg-12 mb-20">
			<div class="box-body">
				<div class="tab-content">
					<div class="tab-pane fade show active" >
						<table class="table footable" data-paging="true" data-filtering="true" data-sorting="true" data-breakpoints='{ "xs": 480, "sm": 768, "md": 992, "lg": 1200, "xl": 1400 }'>
							<thead>
								<tr>
									<th data-name="">번호</th>
									<th data-name="member_id">아이디</th>
									<th data-name="member_name">이름</th>
									<th data-breakpoints="xs" id="m"><fmt:formatDate value="${classes.class_start_date }" pattern="MM/dd"/></th>
									<th data-breakpoints="xs" id="t"><fmt:formatDate value="${classes.class_start_date }" pattern="MM/dd"/></th>
									<th data-breakpoints="xs" id="w"><fmt:formatDate value="${classes.class_start_date }" pattern="MM/dd"/></th>
									<th data-breakpoints="xs" id="th"><fmt:formatDate value="${classes.class_start_date }" pattern="MM/dd"/></th>
									<th data-breakpoints="xs" id="f"><fmt:formatDate value="${classes.class_start_date }" pattern="MM/dd"/></th>
									<th data-breakpoints="xs" >출석률</th>
									
								</tr>
							</thead>
							
							<c:forEach items="${cslList}" var="cslList" varStatus="status">
							
							<tbody>
								<tr>
									<td>${status.count}</td>
									<td>${cslList.student_id}</td>
									<td>${cslList.member.member_name}</td>
									<td><input type="checkbox" class="adomx-checkbox"/></td>
									<td><input type="checkbox" class="adomx-checkbox"/></td>
									<td><input type="checkbox" class="adomx-checkbox"/></td>
									<td><input type="checkbox" class="adomx-checkbox"/></td>
									<td><input type="checkbox" class="adomx-checkbox"/></td>
									<td>%</td>
								</tr>
							</tbody>
							
							</c:forEach>
							
						</table>						
					</div>
				</div>
			</div>
		</div>

		<!-- button -->

	</div>
	<!-- row end -->
	
	<input type="hidden" value ="${classes.class_start_date }" name="start">
	<input type="hidden" value ="${classes.class_end_date }" name="end">
</div>	

<script>

var start= $('input[name=start]').val();
var end= $('input[name=end]').val();


$('.input-date').daterangepicker({
    "showWeekNumbers": true,
    "startDate": start,
    "endDate": end,
    "minDate": start,
    "maxDate": end,
    locale: {
        format: 'YYYY/MM/DD'
      }

}, function(start, end, label) {
  console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
});

$('.input-date').on("change",function(){
	var start1 = $('.input-date').val();
	var tmp = start1.substring(0,10);
	var tmp2 = start1.substring(13,23)
	
	alert(tmp);
	var str = tmp;

	var strArr = str.split('/');

	var date = new Date(strArr[0], strArr[1]-1, strArr[2]);
	
	alert(date.getDay());
	
	
	$('#m').html(tmp.substring(5.8));
	
	date.setHours(date.getHours() + 24)
	$('#t').html((getTimeStamp(date)).substring(5.8));
	
	date.setHours(date.getHours() + 24);
	$('#w').html(getTimeStamp(date).substring(5.8));
	
	date.setHours(date.getHours() + 24);
	$('#th').html(getTimeStamp(date).substring(5.8));
	
	date.setHours(date.getHours() + 24);
	$('#f').html(getTimeStamp(date).substring(5.8));

});



function getTimeStamp(d) {
 	if(d.getDay()===0 || d.getDay()===6){
 		d.setHours(d.getHours()+24);
 	}
 	if(d.getDay()===0 || d.getDay()===6){
 		d.setHours(d.getHours()+24);
 	}
	
    var s =
        leadingZeros(d.getFullYear(), 4) + '/' +
        leadingZeros(d.getMonth() + 1, 2) + '/' +
        leadingZeros(d.getDate(), 2);

    return s;
}

function leadingZeros(n, digits) {

    var zero = '';
    n = n.toString();

    if (n.length < digits) {
        for (i = 0; i < digits - n.length; i++)
            zero += '0';
    }
    return zero + n;
}

</script>



